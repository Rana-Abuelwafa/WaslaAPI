[2025-06-11 12:48:48.605 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-06-11 12:48:49.367 +03:00  WRN]  The WebRootPath was not found: D:\waslaa\api\WaslaAPI\Wasla_App\wwwroot. Static files may be unavailable.
[2025-06-11 12:48:50.591 +03:00  INF]  Now listening on: https://localhost:7283
[2025-06-11 12:48:50.592 +03:00  INF]  Now listening on: http://localhost:5074
[2025-06-11 12:48:50.828 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-06-11 12:48:50.828 +03:00  INF]  Hosting environment: Development
[2025-06-11 12:48:50.828 +03:00  INF]  Content root path: D:\waslaa\api\WaslaAPI\Wasla_App
[2025-06-11 12:48:53.167 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/swagger/index.html - null null
[2025-06-11 12:48:53.533 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/swagger/index.html - 200 null text/html;charset=utf-8 380.3623ms
[2025-06-11 12:48:53.592 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/_framework/aspnetcore-browser-refresh.js - null null
[2025-06-11 12:48:53.622 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/_vs/browserLink - null null
[2025-06-11 12:48:53.626 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 33.4006ms
[2025-06-11 12:48:53.758 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/_vs/browserLink - 200 null text/javascript; charset=UTF-8 135.1589ms
[2025-06-11 12:48:53.947 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/swagger/v1/swagger.json - null null
[2025-06-11 12:48:54.001 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 54.3924ms
[2025-06-11 12:53:14.318 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7283/api/WaslaBrowse/GetPricingPackageWithService - application/json 40
[2025-06-11 12:53:14.337 +03:00  INF]  CORS policy execution successful.
[2025-06-11 12:53:16.202 +03:00  INF]  Executing endpoint 'Wasla_App.Controllers.WaslaBrowseController.GetPricingPackageWithService (Wasla_App)'
[2025-06-11 12:53:16.245 +03:00  INF]  Route matched with {action = "GetPricingPackageWithService", controller = "WaslaBrowse"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPricingPackageWithService(WaslaApp.Data.Models.LangReq) on controller Wasla_App.Controllers.WaslaBrowseController (Wasla_App).
[2025-06-11 12:53:19.571 +03:00  INF]  Executed DbCommand (105ms) [Parameters=[@__req_lang_0='?', @__ToLower_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.service_id, p.curr_code, p.lang_code, p.package_sale_price, p.active, p.discount_amount, p.discount_type, COALESCE(p.start_date::text, '') AS "end_dateStr", p.package_price, p.package_name, p.package_id, p.package_desc, p.start_date, p.end_date, p."order", p.package_details, s0."productName" AS service_name, p.is_recommend, p.package_code, FALSE AS "isSelected", s0.service_code
FROM "PricingPackages" AS p
INNER JOIN (
    SELECT s."productId", s."productName", s.service_code
    FROM "Services" AS s
    WHERE s.lang_code = @__req_lang_0
) AS s0 ON p.service_id = s0."productId"
WHERE p.lang_code = @__req_lang_0 AND lower(p.curr_code) = @__ToLower_1 AND p.active
[2025-06-11 12:53:19.702 +03:00  INF]  Executed DbCommand (3ms) [Parameters=[@__req_active_0='?' (DbType = Boolean), @__req_package_id_1='?' (DbType = Int32), @__req_lang_code_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.active, p.feature_desc, p.feature_name, p.lang_code, p.package_id
FROM "PricingPkgFeatures" AS p
WHERE p.active = @__req_active_0 AND p.package_id = @__req_package_id_1 AND p.lang_code = @__req_lang_code_2
[2025-06-11 12:53:19.795 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__req_active_0='?' (DbType = Boolean), @__req_package_id_1='?' (DbType = Int32), @__req_lang_code_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.active, p.feature_desc, p.feature_name, p.lang_code, p.package_id
FROM "PricingPkgFeatures" AS p
WHERE p.active = @__req_active_0 AND p.package_id = @__req_package_id_1 AND p.lang_code = @__req_lang_code_2
[2025-06-11 12:53:19.796 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__req_active_0='?' (DbType = Boolean), @__req_package_id_1='?' (DbType = Int32), @__req_lang_code_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.active, p.feature_desc, p.feature_name, p.lang_code, p.package_id
FROM "PricingPkgFeatures" AS p
WHERE p.active = @__req_active_0 AND p.package_id = @__req_package_id_1 AND p.lang_code = @__req_lang_code_2
[2025-06-11 12:53:19.797 +03:00  INF]  Executed DbCommand (0ms) [Parameters=[@__req_active_0='?' (DbType = Boolean), @__req_package_id_1='?' (DbType = Int32), @__req_lang_code_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.active, p.feature_desc, p.feature_name, p.lang_code, p.package_id
FROM "PricingPkgFeatures" AS p
WHERE p.active = @__req_active_0 AND p.package_id = @__req_package_id_1 AND p.lang_code = @__req_lang_code_2
[2025-06-11 12:53:19.798 +03:00  INF]  Executed DbCommand (0ms) [Parameters=[@__req_active_0='?' (DbType = Boolean), @__req_package_id_1='?' (DbType = Int32), @__req_lang_code_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.active, p.feature_desc, p.feature_name, p.lang_code, p.package_id
FROM "PricingPkgFeatures" AS p
WHERE p.active = @__req_active_0 AND p.package_id = @__req_package_id_1 AND p.lang_code = @__req_lang_code_2
[2025-06-11 12:53:19.799 +03:00  INF]  Executed DbCommand (0ms) [Parameters=[@__req_active_0='?' (DbType = Boolean), @__req_package_id_1='?' (DbType = Int32), @__req_lang_code_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT p.id, p.active, p.feature_desc, p.feature_name, p.lang_code, p.package_id
FROM "PricingPkgFeatures" AS p
WHERE p.active = @__req_active_0 AND p.package_id = @__req_package_id_1 AND p.lang_code = @__req_lang_code_2
[2025-06-11 12:53:19.816 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WaslaApp.Data.Models.ServicesWithPkg, WaslaApp.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-06-11 12:53:19.883 +03:00  INF]  Executed action Wasla_App.Controllers.WaslaBrowseController.GetPricingPackageWithService (Wasla_App) in 3630.7714ms
[2025-06-11 12:53:19.884 +03:00  INF]  Executed endpoint 'Wasla_App.Controllers.WaslaBrowseController.GetPricingPackageWithService (Wasla_App)'
[2025-06-11 12:53:19.899 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7283/api/WaslaBrowse/GetPricingPackageWithService - 200 null application/json; charset=utf-8 5581.0653ms
[2025-06-11 12:56:56.935 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7283/api/WaslaClient/MakeClientInvoiceForPackages - application/json 603
[2025-06-11 12:56:56.937 +03:00  INF]  CORS policy execution successful.
[2025-06-11 12:56:57.116 +03:00  INF]  Executing endpoint 'Wasla_App.Controllers.WaslaClientController.MakeClientInvoiceForPackages (Wasla_App)'
[2025-06-11 12:56:57.123 +03:00  INF]  Route matched with {action = "MakeClientInvoiceForPackages", controller = "WaslaClient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeClientInvoiceForPackages(System.Collections.Generic.List`1[WaslaApp.Data.Models.InvoiceReq]) on controller Wasla_App.Controllers.WaslaClientController (Wasla_App).
[2025-06-11 12:56:57.127 +03:00  INF]  Executed action Wasla_App.Controllers.WaslaClientController.MakeClientInvoiceForPackages (Wasla_App) in 4.1028ms
[2025-06-11 12:56:57.128 +03:00  INF]  Executed endpoint 'Wasla_App.Controllers.WaslaClientController.MakeClientInvoiceForPackages (Wasla_App)'
[2025-06-11 12:56:57.130 +03:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'Wasla_App.Services.IMailService' while attempting to activate 'Wasla_App.Controllers.WaslaClientController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method82(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-06-11 12:56:57.160 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7283/api/WaslaClient/MakeClientInvoiceForPackages - 500 null text/plain; charset=utf-8 252.0127ms
[2025-06-11 12:58:39.339 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-06-11 12:58:39.654 +03:00  WRN]  The WebRootPath was not found: D:\waslaa\api\WaslaAPI\Wasla_App\wwwroot. Static files may be unavailable.
[2025-06-11 12:58:39.882 +03:00  INF]  Now listening on: https://localhost:7283
[2025-06-11 12:58:39.882 +03:00  INF]  Now listening on: http://localhost:5074
[2025-06-11 12:58:40.063 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-06-11 12:58:40.063 +03:00  INF]  Hosting environment: Development
[2025-06-11 12:58:40.063 +03:00  INF]  Content root path: D:\waslaa\api\WaslaAPI\Wasla_App
[2025-06-11 12:58:43.037 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/swagger/index.html - null null
[2025-06-11 12:58:43.476 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/swagger/index.html - 200 null text/html;charset=utf-8 451.1672ms
[2025-06-11 12:58:45.071 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/_framework/aspnetcore-browser-refresh.js - null null
[2025-06-11 12:58:45.079 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/_framework/aspnetcore-browser-refresh.js - 200 16503 application/javascript; charset=utf-8 7.6328ms
[2025-06-11 12:58:45.435 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/_vs/browserLink - null null
[2025-06-11 12:58:45.486 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/_vs/browserLink - 200 null text/javascript; charset=UTF-8 51.3775ms
[2025-06-11 12:58:46.216 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7283/swagger/v1/swagger.json - null null
[2025-06-11 12:58:46.249 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7283/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 32.9183ms
[2025-06-11 12:59:30.580 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7283/api/WaslaClient/MakeClientInvoiceForPackages - application/json 603
[2025-06-11 12:59:30.588 +03:00  INF]  CORS policy execution successful.
[2025-06-11 12:59:30.879 +03:00  INF]  Executing endpoint 'Wasla_App.Controllers.WaslaClientController.MakeClientInvoiceForPackages (Wasla_App)'
[2025-06-11 12:59:30.960 +03:00  INF]  Route matched with {action = "MakeClientInvoiceForPackages", controller = "WaslaClient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MakeClientInvoiceForPackages(System.Collections.Generic.List`1[WaslaApp.Data.Models.InvoiceReq]) on controller Wasla_App.Controllers.WaslaClientController (Wasla_App).
[2025-06-11 13:00:09.144 +03:00  INF]  Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "InvoiceMain" AS i
[2025-06-11 13:00:12.362 +03:00  INF]  Executed DbCommand (36ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?' (DbType = Boolean), @p2='?', @p3='?', @p4='?', @p5='?', @p6='?' (DbType = Decimal), @p7='?', @p8='?', @p9='?' (DbType = DateTime2), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "InvoiceMain" (invoice_id, active, client_email, client_id, client_name, curr_code, dicount, invoice_code, invoice_code_auto, invoice_date, total_price)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
[2025-06-11 13:00:18.611 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "ClientServices" AS c
[2025-06-11 13:00:18.660 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ClientServices" (id, client_id, invoice_id, package_id, "productId")
VALUES (@p0, @p1, @p2, @p3, @p4);
[2025-06-11 13:00:18.663 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "ClientServices" AS c
[2025-06-11 13:00:18.789 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__service_client_id_0='?', @__service_productId_1='?' (DbType = Int32), @__service_package_id_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c.id, c.client_id, c.invoice_id, c.package_id, c."productId"
FROM "ClientServices" AS c
WHERE c.client_id = @__service_client_id_0 AND c."productId" = @__service_productId_1 AND c.package_id = @__service_package_id_2
LIMIT 2
[2025-06-11 13:00:18.812 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT max(c.id)
FROM "ClientServices" AS c
[2025-06-11 13:00:18.818 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Decimal), @p1='?', @p2='?' (DbType = Decimal), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "ClientServices" (id, client_id, invoice_id, package_id, "productId")
VALUES (@p0, @p1, @p2, @p3, @p4);
[2025-06-11 13:00:27.229 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-06-11 13:00:27.243 +03:00  INF]  Executed action Wasla_App.Controllers.WaslaClientController.MakeClientInvoiceForPackages (Wasla_App) in 56276.2135ms
[2025-06-11 13:00:27.244 +03:00  INF]  Executed endpoint 'Wasla_App.Controllers.WaslaClientController.MakeClientInvoiceForPackages (Wasla_App)'
[2025-06-11 13:00:27.264 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7283/api/WaslaClient/MakeClientInvoiceForPackages - 200 null application/json; charset=utf-8 56684.2987ms
